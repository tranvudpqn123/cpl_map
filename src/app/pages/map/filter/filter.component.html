<section class="p-6 w-80 h-dvh border-r border-slate-300 overflow-auto">

    <div class="mb-6">
        <h6 class="mb-3 text-xl text-slate-800">Lọc cửa hàng</h6>
        <form class="flex flex-col gap-5" [formGroup]="searchForm" (submit)="onSearch()">
            <div>
                <p class="text-slate-400">Tên cửa hàng</p>
                <input
                    type="text"
                    class="px-4 w-full rounded h-8 border"
                    formControlName="keySearch"
                >
            </div>

            <div>
                <p class="text-slate-400">Loại hình dịch vụ</p>
                <select
                    class="px-2 w-full rounded h-8 border"
                    formControlName="pageSize"
                >
                    <option [value]="-1">Tất cả</option>
                    @for(option of pageSizeOptions; track $index) {
                        <option [value]="option">{{option}}</option>
                    }
                </select>
            </div>

            <div>
                <p class="text-slate-400">Số lượng merchant</p>
                <select
                    class="px-2 w-full rounded h-8 border"
                    formControlName="serviceTypeId"
                >
                    <option value="" selected>Tất cả</option>
                    @for(serviceType of serviceTypes(); track $index) {
                        <option [value]="serviceType.id">{{serviceType.name}}</option>
                    }
                </select>
            </div>

            <div>
                <p class="text-slate-400">Sắp xếp theo</p>
                <div class="flex align-center gap-2">
                    <input
                        type="radio"
                        class=""
                        id="billCount"
                        name="sortBy"
                        value="BILL_COUNT"
                        formControlName="sortBy"
                    >
                    <label for="billCount">Số lượng hóa đơn</label>
                </div>
                <div class="flex align-center gap-2">
                    <input
                        type="radio"
                        class=""
                        id="billAmount"
                        name="sortBy"
                        value="BILL_AMOUNT"
                        formControlName="sortBy"
                    >
                    <label for="billAmount">Giá trị hóa đơn</label>
                </div>
            </div>

            <button class="h-10 rounded bg-amber-500 text-white">Tìm kiếm</button>
        </form>
    </div>

    <div class="sticky top-0">
        <h6 class="mb-3 text-xl text-slate-800">Kết quả tìm kiếm ({{ merchants()?.length}})</h6>
        @for (merchant of merchants(); track $index) {
            <div
                class="py-2 px-1 flex items-center gap-2 leading-none cursor-pointer rounded group hover:bg-amber-50"
                [class.bg-amber-50]="merchant.selected"
                (click)="onSelectMerchant(merchant)"
            >
                <div
                    class="w-6 h-6 flex items-center justify-center border border-slate-300 rounded group-hover:bg-amber-500 group-hover:text-white group-hover:border-amber-500"
                    [class.bg-amber-500]="merchant.selected"
                    [class.text-white]="merchant.selected"
                    [class.border-amber-500]="merchant.selected"

                >{{merchant.orderNumber}}</div>
                <div>{{merchant.name}}</div>
            </div>
        }
    </div>

</section>
